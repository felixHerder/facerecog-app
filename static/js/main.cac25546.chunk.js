(this["webpackJsonpfacerecog-app"]=this["webpackJsonpfacerecog-app"]||[]).push([[0],{118:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},467:function(e,t,n){},468:function(e,t,n){},469:function(e,t,n){},470:function(e,t,n){"use strict";n.r(t);n(116),n(117),n(118);var a=n(4),s=n.n(a),o=n(35),i=n.n(o),c=n(23),r=n(18),l=n(19),u=n(21),h=n(20),d=n(472),b=n(474),p=n(475),m=n(473),j=n(2),g=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).toggle=function(){a.setState((function(e){return{dropdownOpen:!e.dropdownOpen}}))},a.state={dropdownOpen:!1},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{className:"pr4 pt4 tc",children:Object(j.jsxs)(d.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle,children:[Object(j.jsx)(b.a,{tag:"span","data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen,children:Object(j.jsx)("img",{src:"http://tachyons.io/img/logo.jpg",className:"br-100 ba w3 dib",alt:"avatar"})}),Object(j.jsxs)(p.a,{right:!0,className:"shadow-5 mt4",style:{background:"rgba(255, 255, 255, .5)"},children:[Object(j.jsx)(m.a,{onClick:this.props.toggleModal,children:"View Profile"}),Object(j.jsx)(m.a,{onClick:function(){return e.props.onRouteChange("signout")},children:"Sign Out"})]})]})})}}]),n}(s.a.Component),f=function(e){var t=e.onRouteChange,n=e.isSignedin,a=e.toggleModal;return n?Object(j.jsx)("nav",{className:"flex justify-end",children:Object(j.jsx)(g,{toggleModal:a,onRouteChange:t})}):Object(j.jsxs)("nav",{className:"flex justify-end",children:[Object(j.jsx)("p",{onClick:function(){return t("signin")},className:"f5 b link dim black-70 underline ph3 pointer mt3 mb0",children:"Sign in"}),Object(j.jsx)("p",{onClick:function(){return t("register")},className:"f5 b link dim black-70 underline ph3 pointer mt3 mb0 mr3",children:"Register"})]})},O=n(114),x=n.n(O),w=n.p+"static/media/charlie.dc2d47db.jpg",v=(n(140),function(){return Object(j.jsx)("div",{className:"absolute top-0 left-0 ml4 mt4 w4",children:Object(j.jsx)(x.a,{className:"Tilt br3 shadow-2",options:{max:35},style:{height:96,width:96},children:Object(j.jsx)("div",{className:"Tilt-inner pa3",children:Object(j.jsx)("img",{alt:"face logo",src:w,style:{mixBlendMode:"multiply"}})})})})}),N=n(52),k=function(e){var t=e.user,n=Object(a.useState)(""),s=Object(N.a)(n,2),o=s[0],i=s[1];return Object(a.useEffect)((function(){t.entries,fetch("https://6cwlu4rs38.execute-api.us-east-1.amazonaws.com/frecrank?rank="+t.entries).then((function(e){return e.json()})).then((function(e){i(e.input)})).catch((function(e){return console.log(e,"unable to fetch rank")}))}),[t.entries]),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"white f5 mh3 mt4",children:[Object(j.jsxs)("span",{className:"f3",children:[t.name?t.name:t.username," "]}),"your current entry count is",Object(j.jsxs)("span",{className:"f3",children:[" ",t.entries]})," - rank:",Object(j.jsx)("span",{className:"f3",children:o})]})})},y=(n(141),function(e){var t=e.isActive;return Object(j.jsx)("div",{className:"loader",style:t?{display:"inline-block"}:{display:"none"}})}),C=(n(142),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onUserChange=function(e){a.setState({signInUser:e.target.value})},a.onPasswordChange=function(e){a.setState({signInPassword:e.target.value})},a.onKeyDown=function(e){"Enter"===e.code&&a.onSubmitSignIn()},a.saveAuthTokeninSession=function(e){window.localStorage.setItem("token",e)},a.onSubmitSignIn=function(){a.setState({isActive:!0,failedmessage:""}),fetch("".concat("https://swagbox-api.herokuapp.com/","/signin"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.state.signInUser,password:a.state.signInPassword})}).then((function(e){return e.json()})).then((function(e){e.userId&&"true"===e.succes?(a.saveAuthTokeninSession(e.token),fetch("".concat("https://swagbox-api.herokuapp.com/","/profile/").concat(e.userId),{method:"get",headers:{"Content-Type":"application/json",Authorization:e.token}}).then((function(e){return e.json()})).then((function(e){e&&e.username&&(a.props.loadUser(e),a.props.onRouteChange("home"))})).catch(console.log)):(a.setState({isActive:!1}),a.setState({failedmessage:"Wrong username or password"}))}))},a.state={signInUser:"",signInPassword:"",isActive:!1,failedmessage:""},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.onRouteChange;return Object(j.jsx)("main",{className:"flex justify-center",children:Object(j.jsx)("div",{className:"pa4 pb2 hover-black-80 br3 ba shadow-5 b--black-20 bg-white-30 mb2 w-100 w-70-m w-30-l mw6",children:Object(j.jsxs)("div",{className:"measure",onKeyDown:this.onKeyDown,children:[Object(j.jsxs)("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0",children:[Object(j.jsx)("legend",{className:"f2 fw3 ph0 mh0",children:"Sign In"}),Object(j.jsxs)("div",{className:"mt3",children:[Object(j.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"user",children:"User"}),Object(j.jsx)("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black-50 hover-white mw5 w-100",type:"text",name:"user",id:"user",required:!0,autoComplete:"off",onChange:this.onUserChange})]}),Object(j.jsxs)("div",{className:"mv3",children:[Object(j.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black-50 hover-white mw5 w-100",type:"password",name:"password",id:"password",required:!0,onChange:this.onPasswordChange})]})]}),Object(j.jsxs)("div",{className:"relative flex items-center justify-center pb2",children:[Object(j.jsx)("input",{className:"b ph3 pv2 input-reset ba bw1 br3 b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign in",onClick:this.onSubmitSignIn}),Object(j.jsx)(y,{isActive:this.state.isActive})]}),Object(j.jsx)("div",{className:"lh-copy",children:Object(j.jsx)("p",{onClick:function(){return e("register")},className:"f6 underline pointer link dim dark-gray db",children:"Register"})}),Object(j.jsx)("p",{className:"f6 dark-red",children:this.state.failedmessage})]})})})}}]),n}(s.a.Component)),S=(n(143),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onPasswordChange=function(e){a.setState({password:e.target.value})},a.onUserChange=function(e){a.setState({username:e.target.value})},a.onKeyDown=function(e){"Enter"===e.code&&a.onSubmitRegister()},a.saveAuthTokeninSession=function(e){window.localStorage.setItem("token",e)},a.onSubmitRegister=function(){a.setState({isActive:!0,failedmessage:""}),fetch("https://swagbox-api.herokuapp.com//register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.state.username,password:a.state.password})}).then((function(e){return e.json()})).then((function(e){e.userId&&"true"===e.succes?(a.saveAuthTokeninSession(e.token),fetch("".concat("https://swagbox-api.herokuapp.com/","/profile/").concat(e.userId),{method:"get",headers:{"Content-Type":"application/json",Authorization:e.token}}).then((function(e){return e.json()})).then((function(e){e&&e.username&&(a.props.loadUser(e),a.props.onRouteChange("home"))})).catch(console.log)):(a.setState({isActive:!1}),a.setState({failedmessage:"Something is not right"}))}))},a.state={username:"",password:"",isActive:!1,failedmessage:""},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsx)("main",{className:"flex justify-center",children:Object(j.jsx)("div",{className:"pa4 pb3 black-80 br3 ba shadow-5 b--black-10  bg-white-30 mb2 w-100 w-70-m w-30-l mw6 center ",children:Object(j.jsxs)("div",{className:"measure",onKeyDown:this.onKeyDown,children:[Object(j.jsxs)("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0",children:[Object(j.jsx)("legend",{className:"f2 fw3 ph0 mh0",children:"Register"}),Object(j.jsxs)("div",{className:"mv3",children:[Object(j.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"user",children:"User"}),Object(j.jsx)("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black-50 hover-white mw5 w-100",type:"text",name:"user",id:"user",autoComplete:"off",required:!0,onChange:this.onUserChange})]}),Object(j.jsxs)("div",{className:"mv3",children:[Object(j.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black-50 hover-white mw5 w-100",type:"password",name:"password",id:"password",required:!0,onChange:this.onPasswordChange})]})]}),Object(j.jsxs)("div",{className:"relative  flex items-center justify-center",children:[Object(j.jsx)("input",{className:"b ph3 pv2 input-reset ba bw1 br3 b--black-50 bg-transparent grow pointer f6 dib",type:"submit",value:"Register",onClick:this.onSubmitRegister}),Object(j.jsx)(y,{isActive:this.state.isActive})]}),Object(j.jsx)("p",{className:"f6 dark-red",children:this.state.failedmessage})]})})})}}]),n}(s.a.Component)),A=(n(144),function(e){var t=e.imageUrl,n=e.boxArr,a=function(e){document.querySelectorAll(".bounding-box").forEach((function(e){return e.classList.toggle("dim")}))},s=function(e){document.querySelectorAll(".bounding-box").forEach((function(e){return e.classList.toggle("dim")}))};return Object(j.jsxs)("div",{className:" mb2",children:[Object(j.jsx)("span",{className:"db white-80 f6 mb2",children:n.length>1?n.length+" swag detected":"https://i.imgur.com/GEjml4N.jpeg"}),Object(j.jsxs)("div",{className:"relative mh3 dib",children:[Object(j.jsx)("img",{id:"inputImage",className:"br3 db shadow-2",alt:"",src:t,width:"900px",height:"auto"}),n.length>0?n.map((function(e,t){return Object(j.jsx)("div",{onMouseEnter:a,onMouseLeave:s,className:"bounding-box","data-key":t,style:{top:e.top_row,left:e.left_col,right:e.right_col,bottom:e.bottom_row},children:Object(j.jsxs)("span",{className:"tag-box",children:[e.name," - ",e.value.toString().slice(0,4)]})},t)})):null]})]})}),I=(n(145),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"f5 ph5",children:"Check your fashion sense with this apparel image classifier."}),Object(j.jsx)("div",{className:"centerInput ma3",children:Object(j.jsxs)("div",{className:"form pa4  br3 shadow-2",children:[Object(j.jsx)("input",{className:"f5 pa2 w-70",type:"text",placeholder:"Paste image url",onChange:this.props.onInputChange}),Object(j.jsx)("button",{className:"w-30 grow f5 link  pa2 dib white bg-green",onClick:this.props.onButtonSubmit,children:"Detect"})]})})]})}},{key:"componentDidMount",value:function(){}}]),n}(s.a.Component)),M=function(){return Object(j.jsxs)("footer",{className:"w-100 flex  items-center  tl bg-white-10 near-black f7 relative bottom-0 left-0",children:[Object(j.jsx)("p",{className:"dib mb0 ml3 pt2 pb2 mr3",children:"Built with React and Express with  PostgreSQL on Heroku."}),Object(j.jsxs)("div",{className:"flex items-center ml-auto mb0 mr3",children:[Object(j.jsxs)("p",{className:"mr3 mb0",children:["Powered by ",Object(j.jsx)("a",{href:"https://www.clarifai.com/",children:"Clarifai"})]}),Object(j.jsx)("a",{className:"w1 dib mh2",href:"https://github.com/felixHerder/facerecog-app",title:"github link",children:Object(j.jsxs)("svg",{className:"dib","data-icon":"github",viewBox:"0 0 32 32",children:[Object(j.jsx)("title",{children:"github icon"}),Object(j.jsx)("path",{d:"M0 18 C0 12 3 10 3 9 C2.5 7 2.5 4 3 3 C6 3 9 5 10 6 C12 5 14 5 16 5 C18 5 20 5 22 6 C23 5 26 3 29 3 C29.5 4 29.5 7 29 9 C29 10 32 12 32 18 C32 25 30 30 16 30 C2 30 0 25 0 18 M3 20 C3 24 4 28 16 28 C28 28 29 24 29 20 C29 16 28 14 16 14 C4 14 3 16 3 20 M8 21 A1.5 2.5 0 0 0 13 21 A1.5 2.5 0 0 0 8 21 M24 21 A1.5 2.5 0 0 0 19 21 A1.5 2.5 0 0 0 24 21 z"})]})}),Object(j.jsx)("a",{className:"w1 dib mh2",href:"http://felixherder.space",title:"website link",children:Object(j.jsxs)("svg",{"data-icon":"dribbble",viewBox:"0 0 32 32",children:[Object(j.jsx)("title",{children:"dribbble icon"}),Object(j.jsx)("path",{d:"M16 0 A16 16 0 0 0 0 16 A16 16 0 0 0 16 32 A16 16 0 0 0 32 16 A16 16 0 0 0 16 0 M5 11.5 A12 12 0 0 1 11 5 A46 46 0 0 1 13.5 9.25 A46 46 0 0 1 5 11.5 M15 4 A12 12 0 0 1 21.5 5.25 A46 46 0 0 1 17 7.75 A50 50 0 0 0 15 4 M4 16 A50 50 0 0 0 15 13 A46 46 0 0 1 16 15.5 A26 26 0 0 0 6 22.5 A12 12 0 0 1 4 16 M18.5 11.5 A50 50 0 0 0 25 8 A12 12 0 0 1 28 13.75 A26 26 0 0 0 19.75 14.5 A50 50 0 0 0 18.5 11.5 M17 19.5 A46 46 0 0 1 18 28 A12 12 0 0 1 8.75 25.5 A22 22 0 0 1 17 19.5 M20.75 18.25 A22 22 0 0 1 28 17.75 A12 12 0 0 1 22 26.5 A50 50 0 0 0 20.75 18.25"})]})})]})]})},U=n(115),R=n.n(U),P=(n(467),document.getElementById("modal-root")),_=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).el=document.createElement("div"),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){P.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){P.removeChild(this.el)}},{key:"render",value:function(){return i.a.createPortal(this.props.children,this.el)}}]),n}(s.a.Component),T=(n(468),function(e){e.isProfileOpen;var t=e.toggleModal,n=e.user,s=e.loadUser,o=Object(a.useState)({name:n.name,color:n.color,pet:n.pet}),i=Object(N.a)(o,2),r=i[0],l=i[1];return Object(j.jsx)("div",{className:"profile-modal",children:Object(j.jsxs)("main",{className:"absolute pa4 black-80 br3 ba shadow-5 b--black-10  bg-white-90 mb2 w-100 w-70-m w-30-l mw6 center ",children:[Object(j.jsx)("div",{className:"f2 b absolute right-0 top-0 mr4 mt3 pointer black-50 hover-black",onClick:t,children:"\xd7"}),Object(j.jsx)("img",{src:"http://tachyons.io/img/logo.jpg",className:"br-100 ba w3 dib",alt:"avatar"}),Object(j.jsx)("h1",{children:r.name}),Object(j.jsx)("h5",{className:"b",children:n.username}),Object(j.jsxs)("h4",{children:["Images submited: ",n.entries]}),Object(j.jsxs)("p",{children:["Member since: ",new Date(n.joined).toLocaleDateString()]}),Object(j.jsx)("hr",{}),Object(j.jsx)("label",{className:"mt2 fw6 lh-copy f6",htmlFor:"username",children:"Name"}),Object(j.jsx)("input",{className:"pa2 w-100",type:"text",name:"name",id:"name",autoComplete:"off",defaultValue:n.name,required:!0,onChange:function(e){return l(Object(c.a)(Object(c.a)({},r),{},{name:e.target.value}))}}),Object(j.jsx)("label",{className:"mt2 fw6 lh-copy f6",htmlFor:"color",children:"Color"}),Object(j.jsx)("input",{className:"db pa2 w-20",type:"color",name:"color",id:"color",autoComplete:"off",defaultValue:n.color,required:!0,onChange:function(e){l(Object(c.a)(Object(c.a)({},r),{},{color:e.target.value}))}}),Object(j.jsx)("label",{className:"db mt2 fw6 lh-copy f6",htmlFor:"pet",children:"Pet"}),Object(j.jsx)("input",{className:"pa2 w-100",type:"text",name:"pet",id:"pet",autoComplete:"off",defaultValue:n.pet,required:!0,onChange:function(e){return l(Object(c.a)(Object(c.a)({},r),{},{pet:e.target.value}))}}),Object(j.jsxs)("div",{className:"mt4 flex justify-between",children:[Object(j.jsx)("button",{className:"b pa2 grow pointer hover-white w-20 bg-light-blue b--black-20",onClick:function(){fetch("https://swagbox-api.herokuapp.com//profile/"+n.id,{method:"post",headers:{"Content-Type":"application/json",Authorization:window.localStorage.getItem("token")},body:JSON.stringify(r)}).then((function(e){return t(),s(Object(c.a)(Object(c.a)({},n),r)),e.json()})).catch((function(e){return console.log(e+"cannot fetch profile"+n.id)}))},children:"Save"}),Object(j.jsx)("button",{className:"b pa2 grow pointer hover-white w-20 bg-light-red b--black-20",onClick:t,children:"Cancel"})]})]})})}),B=(n(469),{particles:{number:{value:70,density:{enable:!0,value_area:800}},move:{speed:.2},color:{value:"#eee"},links:{color:"#eee",distance:150,enable:!0,opacity:.3,width:1}}}),D={input:"https://i.imgur.com/LYXjKN6.jpeg",imageUrl:"",boxArr:[],route:"signin",isSignedin:!1,isProfileOpen:!1,user:{id:"",username:"",name:" ",entries:0,joined:"",pet:"chupakapra",color:"#555555"}},E=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).loadUser=function(t){e.setState({user:{id:t.id,name:t.name,pet:t.pet,color:t.color,username:t.username,entries:t.entries,joined:t.joined}})},e.calculateBoxLocation=function(e){if(!e||!e.outputs)return{};console.log(e);var t=e.outputs[0].data.regions.map((function(e){return{bbox:e.region_info.bounding_box,name:e.data.concepts[0].name,value:e.data.concepts[0].value}})),n=document.getElementById("inputImage"),a=Number(n.width),s=Number(n.height);return t.filter((function(e){return e.value>.7})).map((function(e){return{left_col:e.bbox.left_col*a,top_row:e.bbox.top_row*s,right_col:a-e.bbox.right_col*a,bottom_row:s-e.bbox.bottom_row*s,name:e.name,value:e.value}}))},e.displaySwagBox=function(t){e.setState({boxArr:t})},e.onInputChange=function(t){e.setState({input:t.target.value})},e.onButtonSubmit=function(){var t=window.localStorage.getItem("token");e.setState({imageUrl:e.state.input}),fetch("https://swagbox-api.herokuapp.com//imageurl",{method:"post",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify({input:e.state.input})}).then((function(e){return e.json()})).then((function(n){n&&fetch("https://swagbox-api.herokuapp.com//image",{method:"put",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify({id:e.state.user.id})}).then((function(e){return e.json()})).then((function(t){e.setState(Object.assign(e.state.user,{entries:t},["id","entries"]))})).catch((function(e){return console.log(e)})),e.displaySwagBox(e.calculateBoxLocation(n))})).catch((function(e){return console.log(e)}))},e.onRouteChange=function(t){"signout"===t?(fetch("https://swagbox-api.herokuapp.com//profile/signout",{method:"post",headers:{"Content-Type":"application/json",Authorization:window.localStorage.getItem("token")}}),window.localStorage.removeItem("token"),e.setState(D)):"home"===t&&e.setState({isSignedin:!0}),e.setState({route:t})},e.toggleModal=function(){e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{isProfileOpen:!e.isProfileOpen})}))},e.state=D,e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=window.localStorage.getItem("token");t&&fetch("".concat("https://swagbox-api.herokuapp.com/","/signin"),{method:"post",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(e){return e.json()})).then((function(n){n&&n.id&&fetch("".concat("https://swagbox-api.herokuapp.com/","/profile/").concat(n.id),{method:"get",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(e){return e.json()})).then((function(t){t&&t.username&&(e.loadUser(t),e.onRouteChange("home"))})).catch(console.log)})).catch(console.log)}},{key:"render",value:function(){var e=this.state,t=e.isSignedin,n=e.imageUrl,a=e.route,s=e.boxArr,o=e.isProfileOpen,i=e.user;return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(R.a,{className:"particles",params:B}),Object(j.jsx)(f,{onRouteChange:this.onRouteChange,isSignedin:t,toggleModal:this.toggleModal}),o&&Object(j.jsx)(_,{children:Object(j.jsx)(T,{isProfileOpen:o,toggleModal:this.toggleModal,user:i,loadUser:this.loadUser})}),"home"===a?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(v,{className:"fl"}),Object(j.jsxs)("main",{children:[Object(j.jsx)(k,{user:this.state.user}),Object(j.jsx)(I,{onInputChange:this.onInputChange,onButtonSubmit:this.onButtonSubmit}),Object(j.jsx)(A,{imageUrl:n,boxArr:s})]})]}):"register"===a?Object(j.jsx)(S,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):Object(j.jsx)(C,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}),Object(j.jsx)(M,{})]})}}]),n}(a.Component);i.a.render(Object(j.jsx)(E,{}),document.getElementById("root"))}},[[470,1,2]]]);
//# sourceMappingURL=main.cac25546.chunk.js.map